---
title: Office 365 针对拒绝服务攻击防御云服务
ms.author: robmazz
author: robmazz
manager: laurawi
audience: ITPro
ms.topic: article
ms.service: O365-seccomp
localization_priority: Normal
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: Microsoft 如何抵御拒绝服务 (DoS) 攻击的云服务。
ms.openlocfilehash: 784e17d4b80ac990c903c96f92cd6b96f194439b
ms.sourcegitcommit: 0017dc6a5f81c165d9dfd88be39a6bb17856582e
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 04/23/2019
ms.locfileid: "32262844"
---
# <a name="defending-microsoft-cloud-services-against-denial-of-service-attacks"></a><span data-ttu-id="e5920-103">防御拒绝服务攻击的 Microsoft 云服务</span><span class="sxs-lookup"><span data-stu-id="e5920-103">Defending Microsoft Cloud Services Against Denial-of-Service Attacks</span></span>

## <a name="introduction"></a><span data-ttu-id="e5920-104">介绍</span><span class="sxs-lookup"><span data-stu-id="e5920-104">Introduction</span></span>
<span data-ttu-id="e5920-105">Microsoft 数据中心受纵深防御安全保护, 其中包括外围防护、视频相机、安全人员和使用生物特征、智能卡和多因素身份验证的安全入口。</span><span class="sxs-lookup"><span data-stu-id="e5920-105">Microsoft datacenters are protected by defense-in-depth security that includes perimeter fencing, video cameras, security personnel, and secure entrances that use biometrics, smartcard, and multi-factor authentication.</span></span> <span data-ttu-id="e5920-106">纵深防御安全在设备的每个区域和每个物理服务器单元继续进行。</span><span class="sxs-lookup"><span data-stu-id="e5920-106">The defense-in-depth security continues through every area of the facility and to each physical server unit.</span></span> <span data-ttu-id="e5920-107">[Microsoft 云基础结构和操作组](https://www.microsoft.com/en-us/cloud-platform/global-datacenters)为云服务提供了核心基础结构和基础技术。</span><span class="sxs-lookup"><span data-stu-id="e5920-107">The [Microsoft Cloud Infrastructure and Operations Group](https://www.microsoft.com/en-us/cloud-platform/global-datacenters) delivers the core infrastructure and foundational technologies for our cloud services.</span></span> <span data-ttu-id="e5920-108">我们的数据中心符合物理安全性和可靠性的行业标准, 由 Microsoft 操作人员管理、监视和管理。</span><span class="sxs-lookup"><span data-stu-id="e5920-108">Our datacenters comply with industry standards for physical security and reliability and are managed, monitored, and administered by Microsoft operations personnel.</span></span>

<span data-ttu-id="e5920-109">为了进一步保护我们的云服务, microsoft 提供了一种 DDoS 防御系统, 这是 microsoft Azure 持续监控和渗透测试过程的一部分。</span><span class="sxs-lookup"><span data-stu-id="e5920-109">To further protect our cloud services, Microsoft provides a DDoS defense system that is part of the Microsoft Azure continuous monitoring and penetration-testing processes.</span></span> <span data-ttu-id="e5920-110">Azure DDoS 防御系统不仅用于抵御来自外部的攻击, 还能抵御来自其他 Azure 租户的攻击。</span><span class="sxs-lookup"><span data-stu-id="e5920-110">The Azure DDoS defense system is designed not only to withstand attacks from the outside, but also from other Azure tenants.</span></span> <span data-ttu-id="e5920-111">Azure 使用标准检测和缓解技术, 如 SYN cookie、速率限制和连接限制, 以防止出现 DDoS 攻击。</span><span class="sxs-lookup"><span data-stu-id="e5920-111">Azure uses standard detection and mitigation techniques such as SYN cookies, rate limiting, and connection limits to protect against DDoS attacks.</span></span>

<span data-ttu-id="e5920-112">Microsoft 的云服务受来自多个来源的攻击的威胁。</span><span class="sxs-lookup"><span data-stu-id="e5920-112">Microsoft's cloud services are subject to the threat of attack from multiple sources.</span></span> <span data-ttu-id="e5920-113">为了缓解和防范各种 DoS 威胁, 我们开发并实施了一个高度可扩展且动态基于 Azure 的威胁检测和缓解系统, 主要目标是保护来自 DoS 攻击的底层基础结构并帮助防止云服务客户的服务中断。</span><span class="sxs-lookup"><span data-stu-id="e5920-113">To mitigate and protect against the various DoS threats, a highly-scalable and dynamic Azure-based threat detection and mitigation system has been developed and implemented with the primary objective of protecting the underlying infrastructure from DoS attacks and helping to prevent service interruptions for cloud services customers.</span></span> <span data-ttu-id="e5920-114">Azure DoS 缓解系统可保护入站、出站和区域到区域的流量。</span><span class="sxs-lookup"><span data-stu-id="e5920-114">The Azure DoS mitigation system protects inbound, outbound, and region-to-region traffic.</span></span>

<span data-ttu-id="e5920-115">对[开放式系统互连](https://docs.microsoft.com/windows-hardware/drivers/network/windows-network-architecture-and-the-osi-model)(OSI) 模型的网络 (L3) 和传输 (L4) 层上的目标启动的大多数 DoS 攻击。</span><span class="sxs-lookup"><span data-stu-id="e5920-115">Most DoS attacks launched against targets at the Network (L3) and Transport (L4) layers of the [Open Systems Interconnection](https://docs.microsoft.com/windows-hardware/drivers/network/windows-network-architecture-and-the-osi-model) (OSI) model.</span></span> <span data-ttu-id="e5920-116">在 L3 和 L4 层上定向的攻击旨在使网络接口或服务面临大量资源的攻击流量, 并拒绝对合法流量做出响应的能力。</span><span class="sxs-lookup"><span data-stu-id="e5920-116">Attacks directed at the L3 and L4 layers are designed to flood a network interface or service with attack traffic to overwhelm resources and deny the ability to respond to legitimate traffic.</span></span> <span data-ttu-id="e5920-117">具体来说, L3 和 L4 攻击尝试将网络链接、设备或服务的容量饱和, 或者使支持应用程序的服务器或虚拟机的 cpu 发生不足。</span><span class="sxs-lookup"><span data-stu-id="e5920-117">Specifically, L3 and L4 attacks attempt to either saturate the capacity of network links, devices, or services or overwhelm the CPUs of servers or virtual machines supporting an application.</span></span>

<span data-ttu-id="e5920-118">为防止 L3 和 L4 攻击, Microsoft 设计、开发和部署了一个解决方案, 该解决方案专门针对通过保护这些层来保护受攻击的基础结构和客户目标。</span><span class="sxs-lookup"><span data-stu-id="e5920-118">To guard against L3 and L4 attacks Microsoft has designed, developed, and deployed a solution aimed specifically at safeguarding the infrastructure and customer targets that come under attack by protecting these layers.</span></span> <span data-ttu-id="e5920-119">保护基础结构可确保面向某个客户的攻击流量不会导致对其他客户的宣传资料损坏或网络服务质量降低。</span><span class="sxs-lookup"><span data-stu-id="e5920-119">Protecting the infrastructure ensures that attack traffic intended for one customer does not result in collateral damage or diminished network quality of service for other customers.</span></span> <span data-ttu-id="e5920-120">解决方案使用数据中心路由器的流量采样数据。</span><span class="sxs-lookup"><span data-stu-id="e5920-120">The solution uses traffic sampling data from datacenter routers.</span></span> <span data-ttu-id="e5920-121">此数据由网络监控服务进行分析以检测攻击。</span><span class="sxs-lookup"><span data-stu-id="e5920-121">This data is analyzed by a network monitoring service to detect attacks.</span></span> <span data-ttu-id="e5920-122">检测到攻击时, 自动防护机制会启动。</span><span class="sxs-lookup"><span data-stu-id="e5920-122">When an attack is detected, automated defense mechanisms kick in.</span></span>

## <a name="application-level-defenses"></a><span data-ttu-id="e5920-123">应用程序级别防御</span><span class="sxs-lookup"><span data-stu-id="e5920-123">Application-Level Defenses</span></span>
<span data-ttu-id="e5920-124">microsoft 工程团队遵循[microsoft 操作安全保障](https://www.microsoft.com/en-us/SDL/OperationalSecurityAssurance)所设置的严格标准, 以帮助保护客户数据。</span><span class="sxs-lookup"><span data-stu-id="e5920-124">Microsoft engineering teams follow the rigorous standards set by [Microsoft Operational Security Assurance](https://www.microsoft.com/en-us/SDL/OperationalSecurityAssurance) to help protect customer data.</span></span> <span data-ttu-id="e5920-125">Microsoft 的云服务是专门为支持非常高的负载而构建的, 并且可以针对应用程序级别的 DoS 攻击进行保护和缓解。</span><span class="sxs-lookup"><span data-stu-id="e5920-125">Microsoft's cloud services are intentionally built to support a very high load as well as to protect and mitigate against application-level DoS attacks.</span></span> <span data-ttu-id="e5920-126">我们实施了一个扩展体系结构, 其中的服务分布在多个全球数据中心, 其中一些工作负载中的区域隔离和限制功能。</span><span class="sxs-lookup"><span data-stu-id="e5920-126">We have implemented a scaled-out architecture where services are distributed across multiple global datacenters with regional isolation and throttling features in some of the workloads.</span></span>

<span data-ttu-id="e5920-127">在服务的初始安装过程中, 客户管理员标识的每个客户的国家或地区决定了该客户的数据的主存储位置。</span><span class="sxs-lookup"><span data-stu-id="e5920-127">Each customer's country or region, which the customer's administrator identifies during the initial setup of the services, determines the primary storage location for that customer's data.</span></span> <span data-ttu-id="e5920-128">根据主/备份策略在冗余数据中心之间复制客户数据。</span><span class="sxs-lookup"><span data-stu-id="e5920-128">Customer data is replicated between redundant datacenters according to a primary/backup strategy.</span></span> <span data-ttu-id="e5920-129">主数据中心将应用程序软件与在软件上运行的所有主要客户数据一起承载。</span><span class="sxs-lookup"><span data-stu-id="e5920-129">A primary datacenter hosts the application software along with all the primary customer data running on the software.</span></span> <span data-ttu-id="e5920-130">备份数据中心提供自动故障转移。</span><span class="sxs-lookup"><span data-stu-id="e5920-130">A backup datacenter provides automatic failover.</span></span> <span data-ttu-id="e5920-131">如果由于任何原因而导致主数据中心无法正常运行, 则会将请求重定向到备份数据中心中的软件和客户数据的副本。</span><span class="sxs-lookup"><span data-stu-id="e5920-131">If the primary datacenter ceases to function for any reason, requests will be redirected to the copy of the software and customer data in the backup datacenter.</span></span> <span data-ttu-id="e5920-132">在任何给定时间, 客户数据可能会在主数据中心或备份数据中心中进行处理。</span><span class="sxs-lookup"><span data-stu-id="e5920-132">At any given time, customer data may be processed in either the primary or the backup datacenter.</span></span> <span data-ttu-id="e5920-133">跨多个数据中心分布数据可在一个数据中心受到攻击时减少受影响的表面区域。</span><span class="sxs-lookup"><span data-stu-id="e5920-133">Distributing data across multiple datacenters reduces the affected surface area in case one datacenter is attacked.</span></span> <span data-ttu-id="e5920-134">此外, 受影响的数据中心中的服务可以作为恢复机制之一快速重定向到辅助数据中心, 反之亦然 (重定向回一次服务后重定向到主数据中心)。</span><span class="sxs-lookup"><span data-stu-id="e5920-134">Furthermore, the services in the affected datacenter can be quickly redirected to the secondary datacenter as one of the recovery mechanisms, and vice versa (redirected back to the primary datacenter once service is restored).</span></span>

<span data-ttu-id="e5920-135">各个工作负载包含管理资源利用率的内置功能。</span><span class="sxs-lookup"><span data-stu-id="e5920-135">Individual workloads include built-in features that manage resource utilization.</span></span> <span data-ttu-id="e5920-136">例如, Exchange online 和 SharePoint online 中的限制机制是用于防御 DoS 攻击的多层方法的一部分。</span><span class="sxs-lookup"><span data-stu-id="e5920-136">For example, the throttling mechanisms in Exchange Online and SharePoint Online are part of a multi-layered approach to defending against DoS attacks.</span></span> <span data-ttu-id="e5920-137">Exchange online 用户的限制基于最终用户消耗的资源的级别, 无论资源是处于 Active Directory、Exchange Online 信息存储还是其他地方。</span><span class="sxs-lookup"><span data-stu-id="e5920-137">Throttling for Exchange Online users is based on the level of resources consumed by the end user, whether the resources are in Active Directory, the Exchange Online information store, or elsewhere.</span></span> <span data-ttu-id="e5920-138">将预算分配给每个客户端, 以限制用户消耗的资源。</span><span class="sxs-lookup"><span data-stu-id="e5920-138">A budget is allocated to each client to limit the resources consumed by a user.</span></span> <span data-ttu-id="e5920-139">对用户活动和系统组件的 Exchange Online 限制基于[工作负载管理](http://technet.microsoft.com/en-us/library/jj150503(v=exchg.150).aspx)。</span><span class="sxs-lookup"><span data-stu-id="e5920-139">Exchange Online throttling for user activity and system components is based on [workload management](http://technet.microsoft.com/en-us/library/jj150503(v=exchg.150).aspx).</span></span> <span data-ttu-id="e5920-140">exchange online 工作负载是已明确定义的 exchange online 功能、协议或服务, 用于 exchange online 系统资源管理。</span><span class="sxs-lookup"><span data-stu-id="e5920-140">An Exchange Online workload is an Exchange Online feature, protocol, or service which has been explicitly defined for the purposes of Exchange Online system resource management.</span></span> <span data-ttu-id="e5920-141">每个 Exchange Online 工作负载需要系统资源 (如 CPU、邮箱数据库操作或 Active Directory 请求) 来执行用户请求或后台工作。</span><span class="sxs-lookup"><span data-stu-id="e5920-141">Each Exchange Online workload requires system resources such as CPU, mailbox database operations, or Active Directory requests to perform user requests or background work.</span></span> <span data-ttu-id="e5920-142">exchange Online 工作负载的示例包括 web 上的 Outlook、Exchange ActiveSync、邮箱迁移和邮箱助理。</span><span class="sxs-lookup"><span data-stu-id="e5920-142">Examples of Exchange Online workloads include Outlook on the web, Exchange ActiveSync, mailbox migration, and mailbox assistants.</span></span> <span data-ttu-id="e5920-143">租户管理员可以使用 exchange 命令行管理程序管理用户的 exchange 工作负荷管理限制设置。</span><span class="sxs-lookup"><span data-stu-id="e5920-143">Tenant administrators can manage Exchange workload management throttling settings for users with the Exchange Management Shell.</span></span> <span data-ttu-id="e5920-144">在 Exchange Online 中实施了各种形式的限制, 包括 PowerShell、exchange Web 服务、POP 和 IMAP、exchange ActiveSync、移动设备连接、收件人等。</span><span class="sxs-lookup"><span data-stu-id="e5920-144">There are various forms of throttling which have been implemented within Exchange Online, including PowerShell, Exchange Web Services, and POP and IMAP, Exchange ActiveSync, mobile device connections, recipients, and more.</span></span> <span data-ttu-id="e5920-145">虽然本地 Exchange 部署的管理员可以配置限制策略, 但管理员无法为 Exchange Online 配置限制策略。</span><span class="sxs-lookup"><span data-stu-id="e5920-145">While administrators of on-premises Exchange deployments can configure throttling policies, Administrators cannot configure throttling policies for Exchange Online.</span></span>

<span data-ttu-id="e5920-146">SharePoint Online 中最常见的限制触发是客户端对象模型 (CSOM) 代码, 该代码在频率过高的情况中执行的操作过多。</span><span class="sxs-lookup"><span data-stu-id="e5920-146">The most common trigger for throttling in SharePoint Online is client-side object model (CSOM) code that performs too many actions at too high a frequency.</span></span> <span data-ttu-id="e5920-147">使用 CSOM, 可以通过单个请求执行许多操作, 这会超过使用限制, 并导致每用户限制。</span><span class="sxs-lookup"><span data-stu-id="e5920-147">With CSOM, many actions can be performed with a single request, which can exceed usage limits and cause per-user throttling.</span></span>

<span data-ttu-id="e5920-148">不管可能导致限制的活动, 当用户超过使用限制时, SharePoint Online 将对来自该用户帐户的任何其他请求 (通常在短时间内) 进行限制。</span><span class="sxs-lookup"><span data-stu-id="e5920-148">Regardless of the activity which might result in throttling, when a user exceeds usage limits, SharePoint Online throttles any further requests from that user account, usually for a short period of time.</span></span> <span data-ttu-id="e5920-149">在用户限制生效时, 将限制该用户的所有操作, 直到限制过期, 具体取决于以下条件:</span><span class="sxs-lookup"><span data-stu-id="e5920-149">While a user throttle is in effect, all actions by that user are throttled until the throttle expires, according to the following criteria:</span></span>
- <span data-ttu-id="e5920-150">对于用户直接在浏览器中执行的请求, SharePoint Online 将重定向到限制信息页面, 请求将失败。</span><span class="sxs-lookup"><span data-stu-id="e5920-150">For requests performed by the user directly in a browser, SharePoint Online redirects to a throttling information page, and the requests fail.</span></span>
- <span data-ttu-id="e5920-151">对于所有其他请求 (包括 CSOM 调用), SharePoint Online 将返回 HTTP 状态代码 429 ("请求过多"), 请求失败。</span><span class="sxs-lookup"><span data-stu-id="e5920-151">For all other requests, including CSOM calls, SharePoint Online returns HTTP status code 429 ("too many requests"), and the requests fail.</span></span>

<span data-ttu-id="e5920-152">如果有问题的过程仍超过使用限制, SharePoint Online 可能会完全阻止进程并返回 HTTP 状态代码 503 ("服务不可用")。</span><span class="sxs-lookup"><span data-stu-id="e5920-152">If the offending process continues to exceed usage limits, SharePoint Online may completely block the process and return HTTP status code 503 ("service unavailable").</span></span>

## <a name="vulnerability-and-penetration-testing"></a><span data-ttu-id="e5920-153">漏洞和渗透测试</span><span class="sxs-lookup"><span data-stu-id="e5920-153">Vulnerability and Penetration Testing</span></span>
<span data-ttu-id="e5920-154">Microsoft 使用多种[安全技术和做法](https://www.microsoft.com/en-us/trustcenter/security/threatmanagement)针对新式复杂威胁[保护其云基础结构](https://blogs.technet.microsoft.com/hybridcloud/2015/05/05/protecting-your-datacenter-and-cloud-from-emerging-threats/)和本地网络, 包括对云服务使用反恶意软件组件和服务、虚拟计算机 (vm) 和其他系统;高级威胁分析, 它监视网络、系统和用户的正常使用模式, 并使用机器学习来标记出不正常且常规渗透测试的任何行为。</span><span class="sxs-lookup"><span data-stu-id="e5920-154">Microsoft uses many [security technologies and practices](https://www.microsoft.com/en-us/trustcenter/security/threatmanagement) to [protect its cloud infrastructure](https://blogs.technet.microsoft.com/hybridcloud/2015/05/05/protecting-your-datacenter-and-cloud-from-emerging-threats/) and on-premises networks against modern, sophisticated threats, including using antimalware components and services for cloud services, virtual machines (VMs), and other systems; Advanced Threat Analytics, which monitors normal usage patterns for networks, systems, and users, and employs machine learning to flag any behavior that is out of the ordinary, and regular penetration testing.</span></span>

<span data-ttu-id="e5920-155">除了执行我们自己的渗透测试并向我们的客户提供[Microsoft 云统一渗透测试计划](https://technet.microsoft.com/en-us/mt784683)之外, 我们还将参与第三方安全专业人员, 他们将定期执行漏洞评估并针对云服务的渗透测试。</span><span class="sxs-lookup"><span data-stu-id="e5920-155">In addition to performing our own penetration tests and offering to our customers a [Microsoft Cloud Unified Penetration Testing program](https://technet.microsoft.com/en-us/mt784683), we also engage with third-party security professionals who perform regular vulnerability assessments of and penetration testing against our cloud services.</span></span> <span data-ttu-id="e5920-156">我们将从[服务信任](https://aka.ms/STP)和[服务保证](https://aka.ms/ServiceAssurance)门户下载这些第三方漏洞评估中的报告。</span><span class="sxs-lookup"><span data-stu-id="e5920-156">We make the reports from these third-party vulnerability assessments available for download from the [Service Trust](https://aka.ms/STP) and the [Service Assurance](https://aka.ms/ServiceAssurance) portals.</span></span>
