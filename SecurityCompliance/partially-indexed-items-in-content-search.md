---
title: 处理 Office 365 内容搜索中的部分索引项
ms.author: markjjo
author: markjjo
manager: laurawi
ms.date: 5/11/2018
ms.audience: Admin
ms.topic: conceptual
f1_keywords:
- ms.o365.cc.UnindexedItemsLearnMore
ms.service: O365-seccomp
localization_priority: Normal
ms.collection:
- Strat_O365_IP
- M365-security-compliance
search.appverid:
- SPO160
- MOE150
- MET150
ms.assetid: d1691de4-ca0d-446f-a0d0-373a4fc8487b
description: '了解 Exchange 和 SharePoint 中的未编制索引的项目, 您可以通过 Office 365 安全&amp;合规中心在内容搜索运行中加入这些项目。 '
ms.openlocfilehash: 8a04be425e2d9ea0f91518b99c18edfb25a85c63
ms.sourcegitcommit: baf23be44f1ed5abbf84f140b5ffa64fce605478
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/26/2019
ms.locfileid: "30296745"
---
# <a name="partially-indexed-items-in-content-search-in-office-365"></a>处理 Office 365 内容搜索中的部分索引项

从 Office 365 安全&amp;合规中心运行的内容搜索在运行搜索时, 会自动在估计的搜索结果中包含部分索引的项目。部分索引项目是指 SharePoint 和 OneDrive for business 网站上的 Exchange 邮箱项目和文档, 因为某些原因未完全编制搜索索引。在 Exchange 中, 部分索引项目通常包含一个文件类型无法编制索引的文件, 该文件将附加到电子邮件中。以下是无法将项目编入索引以进行搜索的一些其他原因, 在运行搜索时, 这些项目作为部分索引项目返回: 
  
- 无法识别或不支持对文件类型编制索引。
    
-  邮件有一个没有有效处理程序的附加文件, 如图像文件;这是部分索引的电子邮件项的最常见原因。 
    
- 文件类型支持检索，但是特定文件出现检索错误。
    
- 附加到电子邮件的文件过多。
    
- 附加到电子邮件的文件过大。
    
- 文件使用非 Microsoft 技术进行加密。
    
- 文件具有密码保护。
    
> [!NOTE]
> 大多数 Office 365 组织的内容数量少于 1%, 而按部分索引的大小少于 12%。卷和大小之间区别的原因是, 较大的文件包含无法完全编制索引的内容的可能性较高。 
  
若要进行法律调查, 你的组织可能需要查看部分索引的项目。您还可以指定在将搜索结果导出到本地计算机时, 或者在使用 Office 365 高级电子数据展示准备分析结果时是否包含部分索引的项目。有关详细信息, 请参阅[在 Office 365 电子数据展示中调查部分索引项](investigating-partially-indexed-items-in-ediscovery.md)。
  
## <a name="file-types-not-indexed-for-search"></a>文件类型未编入索引以供搜索

某些类型的文件 (如位图或 MP3 文件) 不包含可以编制索引的内容。因此, Exchange 和 SharePoint 中的搜索索引服务器不会对这些类型的文件执行全文本索引。这些类型的文件被视为不受支持的文件类型。此外, 还提供了已禁用全文索引的文件类型, 默认情况下为或管理员。在内容搜索中, 不受支持和禁用的文件类型标记为未编制索引的项目。如前所述, 在运行搜索、将搜索结果导出到本地计算机或为高级电子数据展示准备搜索结果时, 可将部分索引项目包括在搜索结果集中。 
  
有关支持和禁用的文件格式列表，请参阅以下主题：
  
- **** - exchange[搜索编制索引的 exchange 文件格式](https://go.microsoft.com/fwlink/p/?LinkID=386618)
    
- **Exchange** - [set-searchdocumentformat](https://go.microsoft.com/fwlink/p/?LinkID=724037)
    
- **** - sharepoint[中的 sharepoint 默认已爬网文件扩展名和分析文件类型](https://go.microsoft.com/fwlink/p/?LinkID=404033)
    

  
## <a name="messages-and-documents-with-partially-indexed-file-types-can-be-returned-in-search-results"></a>在搜索结果中, 可以返回具有部分索引文件类型的邮件和文档。

并不是每个包含部分索引的文件附件的电子邮件, 要么自动以部分索引项目的形式返回每个部分索引的 SharePoint 文档。这是因为其他邮件或文档属性 (如电子邮件中的**Subject**属性和文档的**Title**或**Author**属性) 已编制索引, 并可供搜索。例如, 如果在电子邮件主题中或在文档的文件名或标题中显示该关键字, 则 "金融" 关键字搜索将返回具有部分索引的文件附件的项目。但是, 如果关键字仅显示在文件的正文中, 则该邮件或文档将作为部分索引项返回。 
  
同样, 如果其他邮件或文档属性 (已编制索引和可搜索) 满足搜索条件, 则搜索结果中将包含部分索引的文件附件和文档的部分索引文件类型的邮件。为搜索编制索引的邮件属性包括发送和接收日期、发件人和收件人、附件的文件名和邮件正文中的文本。为搜索编制索引的文档属性包括创建日期和修改日期。因此, 即使邮件附件可能是部分索引项目, 如果其他邮件或文档属性的值与搜索条件相匹配, 则邮件将包含在常规搜索结果中。
  
有关可以使用安全&amp;合规性中心中的搜索功能搜索的电子邮件和文档属性的列表, 请参阅[用于内容搜索的关键字查询和搜索条件](keyword-queries-and-search-conditions.md)。
  

  
## <a name="partially-indexed-items-included-in-the-search-results"></a>搜索结果中包含的部分索引项目
<a name="unindexeditemsresults"> </a>

您的组织可能需要识别部分索引项并对其执行其他分析, 以确定它们是什么、它们所包含的内容以及它们是否与特定调查相关。如前所述, 搜索的内容位置中部分索引的项目将自动包含在估计的搜索结果中。当您导出搜索结果或为高级电子数据展示准备搜索结果时, 您可以选择包含这些部分索引的项目。若要在导出搜索结果或为高级电子数据展示准备这些项目时包含部分索引项目, 请选择其中一个选项以包含具有无法识别的格式、已加密或未针对其他原因编制索引的项目。
  
请记住以下部分索引项:
  
- 运行内容搜索时, 部分索引项目 (由搜索查询返回) 的总数和大小将显示在详细信息窗格中的 "搜索统计信息" 中, 标记为 "未编制索引的项目"。
    
- 当您导出搜索结果并包含部分索引的项目时, 部分索引的 Exchange 项目将导出到它们所在的每个邮箱的单独的 PST 文件中, 或者, 如果您选择将 Exchange 项目下载为的选项, 则为单个邮件。信息.将部分索引的 SharePoint 项目导出到名为**Uncrawlable**的文件夹中。
    
- 如果要从中导出结果的搜索是对组织中的特定内容位置或所有内容位置的搜索, 则仅导出内容位置中包含与搜索条件匹配的项目的未编制索引的项目。换言之, 如果在邮箱或网站中找不到任何搜索结果, 则不会导出该邮箱或网站中的任何未编制索引的项目。这样做的原因是, 从组织中的很多位置导出部分索引项目可能会增加导出错误的可能性, 并增加导出和下载搜索结果所需的时间。
    
    若要从搜索的所有内容位置导出部分索引的项目, 请将搜索配置为返回所有项目 (通过删除搜索查询中的任何关键字), 然后在导出搜索结果时仅导出部分索引项目 (通过单击 "**仅"无法识别格式的项目、已加密或未针对 "输出选项" 下的其他原因编制索引的项目**。 ****
    
- 如果选择在搜索结果中包含所有邮箱项目, 或者搜索查询未指定任何关键字或仅指定了日期范围, 则部分索引的项目可能不会复制到包含部分索引项目的 PST 文件中。这是因为所有项目 (包括所有部分索引的项目) 将自动包含在常规搜索结果中。
    
- 部分索引的项目不能预览。您必须导出搜索结果以查看搜索返回的部分索引项目。

## <a name="partially-indexed-items-excluded-from-the-search-results"></a>从搜索结果中排除的部分索引项目

如果项目已部分编制索引, 但它不符合搜索查询条件, 则不会将其作为部分索引项包含在搜索结果中。换言之, 该项目将从搜索结果中排除。例如, 假设您运行搜索但不包含任何关键字或属性, 因为您希望包含所有内容。但您包含查询的日期范围条件。如果部分索引的项目超出了该日期范围, 则不会将其作为部分索引项目包含。日期范围是从搜索结果中排除部分索引项目的有效方式。
  
同样, 如果在导出搜索结果时选择包含部分索引的项目, 则不会导出从搜索结果中排除的部分索引项目。
  
此规则的一个例外是创建与电子数据展示事例相关联的基于查询的保留时。如果创建基于查询的保留, 则所有部分索引项都将置于保留状态。这包括部分索引的项目, 这些项目不符合搜索查询条件和可能超出日期范围条件的部分索引项。有关创建基于查询的保留的详细信息, 请参阅[Office 365 Security & 合规中心中的电子数据展示事例中的](ediscovery-cases.md#step-4-place-content-locations-on-hold)步骤4。
  
## <a name="indexing-limits-for-messages-in-content-search"></a>内容搜索中邮件的索引限制

下表介绍了可能导致电子邮件作为内容搜索中的部分索引项返回到 Office 365 中的索引限制。
  
有关 sharepoint 文档的索引限制列表, 请参阅[sharepoint Online 的搜索限制](https://support.office.com/article/7c06e9ed-98b6-4304-a900-14773a8fa32f)。
  
|**索引限制**|**注释**|**说明**|
|:-----|:-----|:-----|
|最大附件大小 (不包括 Excel 文件)  <br/> |150 MB  <br/> |将解析索引的电子邮件附件的最大大小。将不会分析大于此限制的任何附件以编制索引, 同时会将包含附件的邮件标记为部分索引。<br/><br/> **注意:** 分析是索引服务从附件中提取文本的过程, 删除标点符号和空格等不必要的字符, 然后将文本划分为单词 (在称为 "标记化的过程" 中), 然后将这些文本存储在索引中。           |
|Excel 文件的最大大小  <br/> |4 MB  <br/> |一个或多个 Excel 文件的最大大小, 该文件位于网站上或附加到将针对索引进行分析的电子邮件。将不会分析大于此限制的任何 Excel 文件, 并且文件或电子邮件中包含文件附件的邮件将被标记为未索引。  <br/> |
|最大附件数  <br/> |250  <br/> |附加到将为编制索引而分析的电子邮件的最大文件数。如果邮件包含超过250个附件, 则会对第一个250附件进行分析和编制索引, 并将该邮件标记为部分索引, 因为它有其他附件未经过分析。  <br/> |
|最大附件深度  <br/> |30  <br/> |分析的最大嵌套附件数。例如, 如果电子邮件中附加了另一封邮件, 并且附加的邮件包含附加的 word 文档, 则会对 word 文档和附加的邮件编制索引。此行为将继续为最长30个嵌套附件。  <br/> |
|附加图像的最大数量  <br/> |0  <br/> |分析程序将跳过附加到电子邮件的图像, 但未对其编制索引。  <br/> |
|分析项目所用的最长时间  <br/> |30 秒  <br/> |解析用于索引的项时, 最多可花费30秒的时间。如果分析时间超过30秒, 则将项目标记为部分索引。  <br/> |
|最大分析器输出  <br/> |200 万个字符  <br/> |索引分析器中的最大文本输出量。例如, 如果分析程序从文档中提取了8000000个字符, 则只会对前2百万个字符编制索引。  <br/> |
|最大注释标记数  <br/> |2000000  <br/> |在对电子邮件编制索引时, 会使用不同的处理指令对每个单词进行批注, 以指定如何对该单词编制索引。每组处理指令称为注释令牌。若要在 Office 365 中维护服务质量, 电子邮件的注释令牌限制为2000000个。  <br/> |
|索引中的最大正文大小  <br/> |67000000个字符  <br/> |电子邮件正文中的总字符数及其所有附件。对电子邮件编制索引后, 邮件正文和所有附件中的所有文本将串联为单个字符串。索引的此字符串的最大大小为67000000个字符。  <br/> |
|正文中的最大唯一令牌  <br/> |100 万  <br/> |如前所述, 令牌是从内容中提取文本、删除标点符号和空格, 然后将其拆分为索引中存储的词 (称为 "标记") 的结果。例如, 短语`"cat, mouse, bird, dog, dog"`包含5个令牌。但其中只有4个是唯一的令牌。每封电子邮件的唯一令牌的数量限制为 1000000, 这有助于防止索引因过大而无法使用随机令牌。<br/> |
   

  
## <a name="more-information-about-partially-indexed-items"></a>有关部分索引项目的详细信息
<a name="moreinfo"> </a>

- 如前所述, 由于邮件和文档属性及其元数据已编制索引, 如果该关键字出现在索引元数据中, 则关键字搜索可能会返回结果。但是, 如果关键字仅显示在具有不受支持的文件类型的项目的内容中, 则相同的关键字搜索可能不会返回相同的项。在这种情况下, 将以部分索引项的形式返回项。
    
- 如果搜索结果中包含部分索引项, 因为它满足搜索查询条件 (且未排除), 则在估计的搜索统计信息中不会将其作为部分索引项包括在内。此外, 当您导出搜索结果时, 不会将其包含在部分索引项目中。
    
- 虽然支持对文件类型编制索引且已编制索引, 但可能会有索引或搜索错误导致文件作为部分索引项目返回。例如, 搜索非常大的 Excel 文件可能部分成功 (因为索引前 4 MB), 但由于超过了文件大小限制而导致失败。在这种情况下, 可以使用搜索结果和部分索引项返回相同的文件。
    
- 已对使用 Microsoft 技术加密的附加文件编制索引, 并可对其进行搜索。使用非 Microsoft 技术加密的文件部分编制了索引。
    
- 使用 S/MIME 加密的电子邮件部分编制了索引。这包括带有或不带文件附件的加密邮件。
    
- 由信息权限管理 (IRM) 保护的邮件已编制索引，因此如果此类邮件匹配查询参数，将会包括在搜索结果中。

## <a name="see-also"></a>另请参阅

[使用 Office 365 电子数据展示调查部分索引项](investigating-partially-indexed-items-in-ediscovery.md)

