---
title: 创建查询以查找存储在站点上的敏感数据
ms.author: stephow
author: stephow-MSFT
manager: laurawi
ms.date: 6/29/2018
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
localization_priority: Normal
search.appverid:
- MOE150
- MET150
ms.assetid: 3019fbc5-7f15-4972-8d0e-dc182dc7f836
description: 与数据丢失防护 (DLP) SharePoint Online 中，可以发现文档包含在您的租户整个敏感数据。后发现文档，您可以使用文档所有者，以保护数据。本主题可帮助您表单查询搜索敏感数据。
ms.openlocfilehash: 13954a856dd265e3b735d940c7d334d922713637
ms.sourcegitcommit: 36c5466056cdef6ad2a8d9372f2bc009a30892bb
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/27/2018
ms.locfileid: "23013856"
---
# <a name="form-a-query-to-find-sensitive-data-stored-on-sites"></a><span data-ttu-id="ca30e-105">创建查询以查找存储在站点上的敏感数据</span><span class="sxs-lookup"><span data-stu-id="ca30e-105">Form a query to find sensitive data stored on sites</span></span>

<span data-ttu-id="ca30e-p102">用户通常存储敏感数据，如信用卡号，社会保险号码，或个人，在其网站，然后随着时间的推移这可以公开使组织面临巨大的数据丢失的风险。存储在网站上的文档，包括 OneDrive for Business 站点 — 无法共享与组织外部的人员不应具有对信息的访问权。与数据丢失防护 (DLP) SharePoint Online 中，可以发现文档包含在您的租户整个敏感数据。后发现文档，您可以使用文档所有者，以保护数据。本主题可帮助您表单查询搜索敏感数据。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p102">Users often store sensitive data, such as credit card numbers, social security numbers, or personal, on their sites, and over time this can expose an organization to significant risk of data loss. Documents stored on sites—including OneDrive for Business sites—could be shared with people outside the organization who shouldn't have access to the information. With data loss prevention (DLP) in SharePoint Online, you can discover documents that contain sensitive data throughout your tenant. After discovering the documents, you can work with the document owners to protect the data. This topic can help you form a query to search for sensitive data.</span></span>
  
> [!NOTE]
> <span data-ttu-id="ca30e-111">电子发现或电子数据展示和 DLP 是需要[SharePoint Online 计划 2](https://go.microsoft.com/fwlink/?LinkId=510080)的高级功能。</span><span class="sxs-lookup"><span data-stu-id="ca30e-111">Electronic discovery, or eDiscovery, and DLP are premium features that require [SharePoint Online Plan 2](https://go.microsoft.com/fwlink/?LinkId=510080).</span></span> 
  
## <a name="forming-a-basic-dlp-query"></a><span data-ttu-id="ca30e-112">创建一个基本的 DLP 查询</span><span class="sxs-lookup"><span data-stu-id="ca30e-112">Forming a basic DLP query</span></span>

<span data-ttu-id="ca30e-p103">有三个部分构成的基本 DLP 查询： SensitiveType，count 范围和可信度范围。下图中，所示**SensitiveType:"\<类型\>"** 是必需的并且两个**|\<计数范围\>** 和**|\<可信度范围\>** 是可选的。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p103">There are three parts that make up a basic DLP query: SensitiveType, count range, and confidence range. As illustrated in the following graphic, **SensitiveType:"\<type\>"** is required, and both**|\<count range\>** and**|\<confidence range\>** are optional.</span></span> 
  
![示例查询分为必需和可选两种](media/DLP-query-example-text.png)
  
### <a name="sensitive-type---required"></a><span data-ttu-id="ca30e-116">敏感类型 - 必填</span><span class="sxs-lookup"><span data-stu-id="ca30e-116">Sensitive type - required</span></span>

<span data-ttu-id="ca30e-p104">因此，每个部件是什么？SharePoint DLP 查询通常开头属性`SensitiveType:"`和信息类型从[敏感信息类型库存](https://go.microsoft.com/fwlink/?LinkID=509999)，命名并结尾`"`。您还可以使用您的组织创建[自定义的敏感信息类型](create-a-custom-sensitive-information-type.md)的名称。例如，您可能寻找包含信用卡号的文档。在这种情况下，您将使用以下格式： `SensitiveType:"Credit Card Number"`。由于没有包括计数范围或可信度区域，查询将返回信用卡号检测到的每个文档。这是最简单查询，您可以运行，并且返回大多数的结果。请记住的拼写和间距敏感类型重要的。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p104">So what is each part? SharePoint DLP queries typically begin with the property  `SensitiveType:"` and an information type name from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999), and end with a  `"`. You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization. For example, you might be looking for documents that contain credit card numbers. In such an instance, you'd use the following format:  `SensitiveType:"Credit Card Number"`. Because you didn't include count range or confidence range, the query returns every document in which a credit card number is detected. This is the simplest query that you can run, and it returns the most results. Keep in mind that the spelling and spacing of the sensitive type matters.</span></span> 
  
### <a name="ranges---optional"></a><span data-ttu-id="ca30e-125">范围 - 选填</span><span class="sxs-lookup"><span data-stu-id="ca30e-125">Ranges - optional</span></span>

<span data-ttu-id="ca30e-p105">两个后续两个部件让我们快速检查范围如下所示的范围。在 SharePoint DLP 查询中，基本范围都由两个数字分隔的两个时间段，如下所示： `[number]..[number]`。例如，如果`10..20`是使用，该范围将捕获 10%到 20 的号码。有许多不同的范围组合，并在本主题中介绍的多个。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p105">Both of the next two parts are ranges, so let's quickly examine what a range looks like. In SharePoint DLP queries, a basic range is represented by two numbers separated by two periods, which looks like this:  `[number]..[number]`. For instance, if  `10..20` is used, that range would capture numbers from 10 through 20. There are many different range combinations and several are covered in this topic.</span></span> 
  
<span data-ttu-id="ca30e-p106">我们将计数范围添加到查询。可以使用 count 范围定义的文档需要包含之前它包含在查询结果中的敏感信息的次数。例如，如果您希望您的查询返回包含完全五个信用卡号的文档，使用此： `SensitiveType:"Credit Card Number|5"`。计数范围还有助于您确定带来的风险的高度的文档。例如，您的组织可以考虑五台或更多信用卡号文档高风险。若要查找纸此条件的文档，您需要使用此查询： `SensitiveType:"Credit Card Number|5.."`。或者，您可以找到与第五个文档或更少使用此查询信用卡卡号： `SensitiveType:"Credit Card Number|..5"`。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p106">Let's add a count range to the query. You can use count range to define the number of occurrences of sensitive information a document needs to contain before it's included in the query results. For example, if you want your query to return only documents that contain exactly five credit card numbers, use this:  `SensitiveType:"Credit Card Number|5"`. Count range can also help you identify documents that pose high degrees of risk. For example, your organization might consider documents with five or more credit card numbers a high risk. To find documents fitting this criterion, you would use this query:  `SensitiveType:"Credit Card Number|5.."`. Alternatively, you can find documents with five or fewer credit card numbers by using this query:  `SensitiveType:"Credit Card Number|..5"`.</span></span> 
  
#### <a name="confidence-range"></a><span data-ttu-id="ca30e-137">置信区间</span><span class="sxs-lookup"><span data-stu-id="ca30e-137">Confidence range</span></span>

<span data-ttu-id="ca30e-p107">最后，可信度范围是可信的检测到的敏感类型是实际的匹配程度。可信度范围的值同样工作来计算区域。您可以不包括计数范围表单查询。例如，若要搜索的任意数量的信用卡号的文档 — 只要可信度范围是 85%或更高版本 — 将使用此查询： `SensitiveType:"Credit Card Number|*|85.."`。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p107">Finally, confidence range is the level of confidence that the detected sensitive type is actually a match. The values for confidence range work similarly to count range. You can form a query without including a count range. For example, to search for documents with any number of credit card numbers—as long as the confidence range is 85 percent or higher—you would use this query:  `SensitiveType:"Credit Card Number|*|85.."`.</span></span> 
  
> [!IMPORTANT]
> <span data-ttu-id="ca30e-p108">星号 ( `*`) 表示任何值的工作原理是通配符。您可以使用通配符 ( `*`) 是计数范围中或可信度范围，而不是在敏感的类型。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p108">The asterisk ( `*`) is a wildcard character that means any value works. You can use the wildcard character ( `*`) either in the count range or in the confidence range, but not in a sensitive type.</span></span> 
  
### <a name="additional-query-properties-and-search-operators-available-in-the-ediscovery-center"></a><span data-ttu-id="ca30e-144">电子数据展示中心可用的其他查询属性和搜索运算符</span><span class="sxs-lookup"><span data-stu-id="ca30e-144">Additional query properties and search operators available in the eDiscovery Center</span></span>

<span data-ttu-id="ca30e-p109">在 SharePoint 中的 DLP 还引入了 LastSensitiveContentScan 属性，可帮助您搜索特定时间段内扫描的文件。有关与查询示例`LastSensitiveContentScan`属性，请参阅下一节中的[复杂查询的示例](form-a-query-to-find-sensitive-data-stored-on-sites.md#BKMK_ExamplesOfComplexQueries)。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p109">DLP in SharePoint also introduces the LastSensitiveContentScan property, which can help you search for files scanned within a specific timeframe. For query examples with the  `LastSensitiveContentScan` property, see the [Examples of complex queries](form-a-query-to-find-sensitive-data-stored-on-sites.md#BKMK_ExamplesOfComplexQueries) in the next section.</span></span> 
  
<span data-ttu-id="ca30e-p110">您可以将不仅 DLP 特定属性，以创建查询，而且还标准 SharePoint 电子数据展示搜索属性使用如`Author`或`FileExtension`。运算符可用于构建复杂的查询。可用的属性和运算符的列表，请参阅[使用搜索属性和使用电子数据展示的运算符](https://go.microsoft.com/fwlink/?LinkId=510093)博客文章。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p110">You can use not only DLP-specific properties to create a query, but also standard SharePoint eDiscovery search properties such as  `Author` or  `FileExtension`. You can use operators to build complex queries. For the list of available properties and operators, see the [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093) blog post.</span></span> 
  
## <a name="examples-of-complex-queries"></a><span data-ttu-id="ca30e-150">示例</span><span class="sxs-lookup"><span data-stu-id="ca30e-150">Examples of complex queries</span></span>

<span data-ttu-id="ca30e-151">下面的示例使用不同的敏感类型、 属性和运算符来说明如何可以优化您的查询，以查找完全正在查找的内容。</span><span class="sxs-lookup"><span data-stu-id="ca30e-151">The following examples use different sensitive types, properties, and operators to illustrate how you can refine your queries to find exactly what you're looking for.</span></span>
  
|<span data-ttu-id="ca30e-152">**查询**</span><span class="sxs-lookup"><span data-stu-id="ca30e-152">**Query**</span></span>|<span data-ttu-id="ca30e-153">**说明**</span><span class="sxs-lookup"><span data-stu-id="ca30e-153">**Explanation**</span></span>|
|:-----|:-----|
| `SensitiveType:"International Banking Account Number (IBAN)"` <br/> |<span data-ttu-id="ca30e-p111">名称可能听起来有所不同，因为它很长时间，但它是敏感类型的正确名称。请确保使用从[敏感信息类型库存](https://go.microsoft.com/fwlink/?LinkID=509999)的确切名称。您还可以使用您的组织创建[自定义的敏感信息类型](create-a-custom-sensitive-information-type.md)的名称。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p111">The name might seem strange because it's so long, but it's the correct name for that sensitive type. Make sure to use exact names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999). You can also use the name of a [custom sensitive information type](create-a-custom-sensitive-information-type.md) that you created for your organization.  </span></span><br/> |
| <span data-ttu-id="ca30e-157">SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-157">\`SensitiveType:"Credit Card Number</span></span>|<span data-ttu-id="ca30e-158">1..4294967295</span><span class="sxs-lookup"><span data-stu-id="ca30e-158">1..4294967295</span></span>|<span data-ttu-id="ca30e-159">1..100"'</span><span class="sxs-lookup"><span data-stu-id="ca30e-159">1..100"\`</span></span> <br/> |<span data-ttu-id="ca30e-p112">这将返回与至少一个匹配的文档为敏感类型"信用卡号"。每个区域的值是各自的最小和最大值。编写此查询的简单方法是`SensitiveType:"Credit Card Number"`，但其中是为了娱乐中的？</span><span class="sxs-lookup"><span data-stu-id="ca30e-p112">This returns documents with at least one match to the sensitive type "Credit Card Number." The values for each range are the respective minimum and maximum values. A simpler way to write this query is  `SensitiveType:"Credit Card Number"`, but where's the fun in that?  </span></span><br/> |
| <span data-ttu-id="ca30e-163">SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-163">\`SensitiveType:"Credit Card Number</span></span>| <span data-ttu-id="ca30e-164">5..25"和 LastSensitiveContentScan:"8/11/2018..8/13/2018"'</span><span class="sxs-lookup"><span data-stu-id="ca30e-164">5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018"\`</span></span> <br/> |<span data-ttu-id="ca30e-165">这将返回从 2018 年 8 月 11，通过 2018 年 8 月 13，5-25 信用卡号已扫描的文档。</span><span class="sxs-lookup"><span data-stu-id="ca30e-165">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018.</span></span>  <br/> |
| <span data-ttu-id="ca30e-166">SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-166">\`SensitiveType:"Credit Card Number</span></span>| <span data-ttu-id="ca30e-167">5..25"和 LastSensitiveContentScan:"8/11/2018..8/13/2018"不 FileExtension:XLSX</span><span class="sxs-lookup"><span data-stu-id="ca30e-167">5..25" AND LastSensitiveContentScan:"8/11/2018..8/13/2018" NOT FileExtension:XLSX\`</span></span> <br/> |<span data-ttu-id="ca30e-p113">这将返回从 2018 年 8 月 11，通过 2018 年 8 月 13，5-25 信用卡号已扫描的文档。带 XLSX 扩展名的文件不包含在查询结果中。 `FileExtension`是一个可以包括在查询中的许多属性。有关详细信息，请参阅[使用搜索属性和使用电子数据展示的运算符](https://go.microsoft.com/fwlink/?LinkId=510093)。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p113">This returns documents with 5-25 credit card numbers that were scanned from August 11, 2018 through August 13, 2018. Files with an XLSX extension aren't included in the query results.  `FileExtension` is one of many properties that you can include in a query. For more information, see [Using Search Properties and Operators with eDiscovery](https://go.microsoft.com/fwlink/?LinkId=510093).  </span></span><br/> |
| `SensitiveType:"Credit Card Number" OR SensitiveType:"U.S. Social Security Number (SSN)"` <br/> |<span data-ttu-id="ca30e-172">这将返回包含信用卡号或社会保障号的文档。</span><span class="sxs-lookup"><span data-stu-id="ca30e-172">This returns documents that contain either a credit card number or a social security number.</span></span>  <br/> |
   
## <a name="examples-of-queries-to-avoid"></a><span data-ttu-id="ca30e-173">示例</span><span class="sxs-lookup"><span data-stu-id="ca30e-173">Examples of queries to avoid</span></span>

<span data-ttu-id="ca30e-p114">并非所有查询都创建相等。下表提供了不使用 DLP SharePoint 中的查询的示例，并介绍原因。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p114">Not all queries are created equal. The following table gives examples of queries that don't work with DLP in SharePoint and describes why.</span></span>
  
|<span data-ttu-id="ca30e-176">**不支持的查询**</span><span class="sxs-lookup"><span data-stu-id="ca30e-176">**Unsupported query**</span></span>|<span data-ttu-id="ca30e-177">**原因**</span><span class="sxs-lookup"><span data-stu-id="ca30e-177">**Reason**</span></span>|
|:-----|:-----|
| <span data-ttu-id="ca30e-178">SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-178">\`SensitiveType:"Credit Card Number</span></span>|<span data-ttu-id="ca30e-179">.."\`</span><span class="sxs-lookup"><span data-stu-id="ca30e-179">.."\`</span></span> <br/> |<span data-ttu-id="ca30e-180">必须至少添加一个数值。</span><span class="sxs-lookup"><span data-stu-id="ca30e-180">You must add at least one number.</span></span>  <br/> |
| `SensitiveType:"NotARule"` <br/> |<span data-ttu-id="ca30e-p115">"NotARule"不是有效的敏感类型名称。仅名称[敏感信息类型库存](https://go.microsoft.com/fwlink/?LinkID=509999)工作 DLP 查询中。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p115">"NotARule" isn't a valid sensitive type name. Only names in the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999) work in DLP queries.  </span></span><br/> |
| <span data-ttu-id="ca30e-183">SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-183">\`SensitiveType:"Credit Card Number</span></span>|<span data-ttu-id="ca30e-184">0"'</span><span class="sxs-lookup"><span data-stu-id="ca30e-184">0"\`</span></span> <br/> |<span data-ttu-id="ca30e-185">为最小值或范围中的最大值，零无效。</span><span class="sxs-lookup"><span data-stu-id="ca30e-185">Zero isn't valid as either the minimum value or the maximum value in a range.</span></span>  <br/> |
| `SensitiveType:"Credit Card Number"` <br/> |<span data-ttu-id="ca30e-p116">很可能很难查看，但没有额外的空白区域之间"Credit"和"卡片"使查询无效。使用从[敏感信息类型库存](https://go.microsoft.com/fwlink/?LinkID=509999)精确敏感的类型名称。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p116">It's might be difficult to see, but there's extra white space between "Credit" and "Card" that makes the query invalid. Use exact sensitive type names from the [sensitive information types inventory](https://go.microsoft.com/fwlink/?LinkID=509999).  </span></span><br/> |
| <span data-ttu-id="ca30e-188">SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-188">\`SensitiveType:"Credit Card Number</span></span>|<span data-ttu-id="ca30e-189">1.。 3"'</span><span class="sxs-lookup"><span data-stu-id="ca30e-189">1. .3"\`</span></span> <br/> |<span data-ttu-id="ca30e-190">不应由空格分隔的两个时间段部分。</span><span class="sxs-lookup"><span data-stu-id="ca30e-190">The two-period portion shouldn't be separated by a space.</span></span>  <br/> |
| <span data-ttu-id="ca30e-191">SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-191">\`SensitiveType:"Credit Card Number</span></span>| |<span data-ttu-id="ca30e-192">1.</span><span class="sxs-lookup"><span data-stu-id="ca30e-192">1..</span></span>|<span data-ttu-id="ca30e-193">80..."'</span><span class="sxs-lookup"><span data-stu-id="ca30e-193">80.."\`</span></span> <br/> |<span data-ttu-id="ca30e-194">有太多管道分隔符 （</span><span class="sxs-lookup"><span data-stu-id="ca30e-194">There are too many pipe delimiters (</span></span>|<span data-ttu-id="ca30e-p117">).而是遵循以下格式: SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-p117">). Follow this format instead: \`SensitiveType: "Credit Card Number</span></span>|<span data-ttu-id="ca30e-197">1.</span><span class="sxs-lookup"><span data-stu-id="ca30e-197">1..</span></span>|<span data-ttu-id="ca30e-198">80..."'</span><span class="sxs-lookup"><span data-stu-id="ca30e-198">80.."\`</span></span> <br/> |
| <span data-ttu-id="ca30e-199">SensitiveType:"信用卡号</span><span class="sxs-lookup"><span data-stu-id="ca30e-199">\`SensitiveType:"Credit Card Number</span></span>|<span data-ttu-id="ca30e-200">1.</span><span class="sxs-lookup"><span data-stu-id="ca30e-200">1..</span></span>|<span data-ttu-id="ca30e-201">80..101"'</span><span class="sxs-lookup"><span data-stu-id="ca30e-201">80..101"\`</span></span> <br/> |<span data-ttu-id="ca30e-p118">因为可信度值代表百分比，他们不能超过 100。而是介于 1 至 100 选择一个号码。</span><span class="sxs-lookup"><span data-stu-id="ca30e-p118">Because confidence values represent a percentage, they can't exceed 100. Choose a number from 1 through 100 instead.</span></span>  <br/> |
   
## <a name="for-more-information"></a><span data-ttu-id="ca30e-204">详细信息</span><span class="sxs-lookup"><span data-stu-id="ca30e-204">For more information</span></span>

[<span data-ttu-id="ca30e-205">查找存储在 SharePoint Online 网站中的敏感数据</span><span class="sxs-lookup"><span data-stu-id="ca30e-205">Find sensitive data stored in SharePoint Online sites</span></span>](https://support.office.com/article/ef788d8f-9748-4025-bfe4-40541ca4cfb2)
  
[<span data-ttu-id="ca30e-206">敏感信息类型库存</span><span class="sxs-lookup"><span data-stu-id="ca30e-206">Sensitive information types inventory</span></span>](https://go.microsoft.com/fwlink/?LinkID=509999)
  
[<span data-ttu-id="ca30e-207">运行 Office 365 安全性内容的搜索&amp;合规性中心</span><span class="sxs-lookup"><span data-stu-id="ca30e-207">Run a Content Search in the Office 365 Security &amp; Compliance Center</span></span>](run-a-content-search-in-the-security-and-compliance-center.md)
  
[<span data-ttu-id="ca30e-208">内容搜索的关键字查询和搜索条件</span><span class="sxs-lookup"><span data-stu-id="ca30e-208">Keyword queries and search conditions for Content Search</span></span>](keyword-queries-and-search-conditions.md)
  

