---
title: Office 365 监控和自我修复
ms.author: robmazz
author: robmazz
manager: laurawi
ms.date: 8/21/2018
audience: ITPro
ms.topic: article
ms.service: Office 365 Administration
localization_priority: None
search.appverid:
- MET150
ms.collection:
- Strat_O365_IP
- M365-security-compliance
description: 有关 Office 365 监视和自愈功能的信息。
ms.openlocfilehash: 799c4dc97e9cc88dcc77f17b0f11ab76525012d9
ms.sourcegitcommit: c94cb88a9ce5bcc2d3c558f0fcc648519cc264a2
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/20/2019
ms.locfileid: "30090514"
---
# <a name="office-365-monitoring-and-self-healing"></a><span data-ttu-id="5ae13-103">Office 365 监控和自我修复</span><span class="sxs-lookup"><span data-stu-id="5ae13-103">Office 365 Monitoring and Self-Healing</span></span>
<span data-ttu-id="5ae13-p101">考虑到 Office 365 的规模, 无法保持客户数据的恢复能力和安全, 而无需进行全面的内置监控、智能化的警报, 以及快速而可靠的自我修复。以 Office 365 的规模监控一组服务是非常困难的。需要引入新的 mindsets 和方法, 并需要创建全新的技术集, 以在连接的全局环境中运行和管理服务。我们已从传统监控数据收集和筛选的方法中移走, 以创建基于数据分析的方法的警报;在该数据中接受信号并建立可信度, 然后使用自动化来恢复或解决问题。此方法有助于防止人离开恢复等式, 进而使操作更便宜、速度更快且容易出错。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p101">Given the scale of Office 365, it would be impossible to keep customer data resilient and safe from malware without built-in monitoring that is comprehensive, alerting that is intelligent, and self-healing that is fast and reliable. Monitoring a set of services at the scale of Office 365 is very challenging. New mindsets and methodologies needed to be introduced, and whole new sets of technology needed to be created to operate and manage the service in a connected global environment. We have moved away from the traditional monitoring approach of data collection and filtering to create alerts to an approach that is based on data analysis; taking signals and building confidence in that data and then using automation to recover or resolve the issue. This approach helps take humans out of the recovery equation, which in turn makes operations less expensive, faster, and less error prone.</span></span> 

<span data-ttu-id="5ae13-p102">Office 365 监控的基础是包含数据见解引擎 (基于 Azure、SQL Azure 和[开放源代码流式处理数据库技术](http://cassandra.apache.org/)构建) 的一系列技术。它旨在收集和聚合数据并得出结论。目前, 它在多个区域的多个数据中心分布分散的每小时每小时处理500000000个以上的事件 (大约每日约 15 TB)。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p102">Fundamental to Office 365 monitoring is a collection of technologies that comprise our Data Insights Engine, which is built on Azure, SQL Azure, and [open-source streaming database technology](http://cassandra.apache.org/). It is designed to collect and aggregate data and reach conclusions. Currently, it processes more than 500 million events per hour from more than 100,000 servers (~15 TB per day) scattered across dozens of datacenters in many regions, and these numbers are growing.</span></span> 

<span data-ttu-id="5ae13-p103">Office 365 使用*外部监视*, 其中包括创建综合事务以测试重要的所有内容。例如, 在 Exchange Online 中, 每个方案都以分散的方式在全球范围内每隔五分钟对每个数据库进行测试, 从而提供接近系统中各项内容的接近连续覆盖范围。从多个位置, 每日250000000测试事务的执行是为服务创建一个可靠的基准或检测信号。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p103">Office 365 uses *outside-in monitoring*, which involves creating synthetic transactions to test everything that is important. For example, in Exchange Online each scenario is testing every database worldwide every five minutes in a scattered fashion, providing near continuous coverage of everything that lives in the system. From multiple locations, 250 million test transactions per day are performed to create a robust baseline or heartbeat for the service.</span></span> 

<span data-ttu-id="5ae13-p104">Office 365 还使用*红色警报*的概念, 该警报将从数据中心中所有计算机上的所有监视信号缩小到可由人管理的内容。概念非常简单: 如果在多个信号中发生了问题, 则必须进行一些操作。并不是要在一个信号中构建可信度, 这就是对每个信号具有合理的保真度, 以便获得更高的准确性。此监视系统非常强大, 以至于我们不会对我们的监视器进行全天候监视;我们要唤醒的所有机器在检测到问题时唤醒, 在这种情况下, 它将使用适当的呼叫人员或更频繁的呼叫人员来解决问题, 只需继续解决问题。一旦我们开始收集信号并构建红色警报, 我们就可以在所有服务分区中启动 triangulating。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p104">Office 365 also uses the concept of *Red Alert*, which shrinks down all the monitoring signals from all of the machines in our datacenters to something manageable by a human being. The concept is quite simple: If something is happening across multiple signals, there must be something going on. It is not about building confidence in one signal, it is about having reasonable fidelity for each signal so that you get greater accuracy. This monitoring system is so powerful that we do not have 24x7 staff watching our monitors; all we have is the machinery that wakes up if it detects a problem, in which case it will page the appropriate on-call personnel, or more often as is the case, it will just go ahead and solve the problem. Once we start collecting signals and building red alerts off them, we can start triangulating across all our service partitions.</span></span> 

<span data-ttu-id="5ae13-120">根据故障警报和红色警报的组合, 此警报准确表明哪些组件可能有问题, 并且系统即将尝试通过重新启动邮箱服务器来纠正问题。</span><span class="sxs-lookup"><span data-stu-id="5ae13-120">Based on the combination of the failure alert and the Red Alerts, this alert indicates exactly which components could be having a problem, and that the system is going to try to correct the problem by itself by restarting a mailbox server.</span></span> 

<span data-ttu-id="5ae13-p105">除了自愈功能 (如单页还原) 之外, Exchange Online 还包含多种功能, 这些功能采用一种监视和自我修复的方法, 重点是保留最终用户体验。这些功能包括提供内置监视和恢复操作的*托管可用性*以及 AutoReseed, 这将在磁盘故障后自动还原数据库冗余。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p105">In addition to self-healing capabilities such as single page restore, Exchange Online includes several features that take an approach to monitoring and self-healing which focuses on preserving the end-user experience. These features include *Managed Availability*, which provides built-in monitoring and recovery actions, and AutoReseed, which automatically restores database redundancy after a disk failure.</span></span> 

## <a name="managed-availability"></a><span data-ttu-id="5ae13-123">托管可用性</span><span class="sxs-lookup"><span data-stu-id="5ae13-123">Managed Availability</span></span> 
<span data-ttu-id="5ae13-p106">托管可用性提供了本机运行状况检查和恢复解决方案, 可通过面向恢复的操作来监视和保护最终用户体验。托管可用性是 Exchange 高可用性平台的内置监控和恢复操作的集成。它旨在在问题发生且被系统发现时立即检测和恢复问题。与 Exchange 以前的外部监视解决方案和技术不同, 托管可用性不会尝试识别或传达问题的根本原因。相反, 它重点介绍了解决以下三个关键领域的最终用户体验的恢复方面:</span><span class="sxs-lookup"><span data-stu-id="5ae13-p106">Managed availability provides a native health checking and recovery solution that monitors and protects the end user's experience through recovery-oriented actions. Managed availability is the integration of built-in monitoring and recovery actions with the Exchange high availability platform. It's designed to detect and recover from problems as soon as they occur and are discovered by the system. Unlike previous external monitoring solutions and techniques for Exchange, managed availability doesn't try to identify or communicate the root cause of an issue. Instead, it's focused on recovery aspects that address three key areas of the end-user experience:</span></span> 
- <span data-ttu-id="5ae13-129">**可用性**–用户是否可以访问该服务？</span><span class="sxs-lookup"><span data-stu-id="5ae13-129">**Availability** - Can users access the service?</span></span> 
- <span data-ttu-id="5ae13-130">**延迟**-用户体验如何？</span><span class="sxs-lookup"><span data-stu-id="5ae13-130">**Latency** - How is the experience for users?</span></span> 
- <span data-ttu-id="5ae13-131">**错误**-用户能否完成所需的操作？</span><span class="sxs-lookup"><span data-stu-id="5ae13-131">**Errors** - Are users able to accomplish what they want?</span></span> 

<span data-ttu-id="5ae13-p107">托管可用性是在运行 Exchange Online 的每台 Office 365 服务器上运行的内部功能。它每秒轮询并分析数百个运行状况指标。如果发现有问题, 大部分时间会自动修复。但有时托管的可用性将无法自行修复的问题。在这些情况下, 托管可用性将通过事件日志记录将问题上报给 Office 365 支持团队。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p107">Managed availability is an internal feature that runs on every Office 365 server running Exchange Online. It polls and analyzes hundreds of health metrics every second. If something is found to be wrong, most of the time it is fixed automatically. But there will always be issues that managed availability will not be able to fix on its own. In those cases, managed availability will escalate the issue to an Office 365 support team by means of event logging.</span></span> 

## <a name="autoreseed"></a><span data-ttu-id="5ae13-137">自动种子重新设定</span><span class="sxs-lookup"><span data-stu-id="5ae13-137">AutoReseed</span></span> 
<span data-ttu-id="5ae13-p108">Exchange Online 服务器部署在将多个数据库及其日志流存储在同一个非 RAID 磁盘上的配置中。此配置通常称为*一组磁盘*(JBOD), 因为没有用于复制磁盘上的数据的存储冗余机制 (如 RAID)。当 JBOD 环境中的磁盘出现故障时, 该磁盘上的数据将丢失。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p108">Exchange Online servers are deployed in a configuration that stores multiple databases and their log streams on the same non-RAID disk. This configuration is often referred to as *just a bunch of disks* (JBOD) because no storage redundancy mechanisms, such as RAID, are being used to duplicate the data on the disk. When a disk fails in a JBOD environment, the data on that disk is lost.</span></span> 

<span data-ttu-id="5ae13-p109">如果 exchange online 的大小和在其中部署的事实是数百万个磁盘驱动器, 则在 Exchange Online 中定期发生磁盘驱动器故障。事实上, 每天有100以上的故障。当某个磁盘在本地企业部署中失败时, 管理员必须手动替换故障磁盘并还原受影响的数据。在云部署中, Office 365 的大小是, 使用操作员 (云管理员) 手动替换磁盘既不可行, 也不经济。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p109">Given the size of Exchange Online and the fact that deployed within it are millions of disk drives, disk drive failures are a regular occurrence in Exchange Online. In fact, more than 100 fail every day. When a disk fails in an on-premises enterprise deployment, an administrator must manually replace the failed disk and restore the affected data. In a cloud deployment the size of Office 365, having operators (cloud administrators) manually replacing disks is neither practical nor economically feasible.</span></span> 

<span data-ttu-id="5ae13-p110">自动种子重新设定种子或*AutoReseed*是一项功能, 它是为响应磁盘故障、数据库损坏事件或其他需要重新设定种子数据库副本的问题而执行的通常操作员驱动的操作替代的功能。AutoReseed 旨在通过使用系统上预配的备用磁盘在磁盘出现故障后自动还原数据库冗余。如果某个磁盘出现故障, 则该磁盘上存储的数据库副本会自动重新设定种子到服务器上的预先配置的备用磁盘, 从而恢复冗余。</span><span class="sxs-lookup"><span data-stu-id="5ae13-p110">Automatic Reseed, or *AutoReseed*, is a feature that is the replacement for what is normally operator-driven action in response to a disk failure, database corruption event, or other issue that necessitates a reseeding of a database copy. AutoReseed is designed to automatically restore database redundancy after a disk failure by using spare disks that have been provisioned on the system. If a disk fails, the database copies stored on that disk are automatically reseeded to a preconfigured spare disk on the server, thereby restoring redundancy.</span></span> 